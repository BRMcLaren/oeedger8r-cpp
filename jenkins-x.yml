buildPack: C++
pipelineConfig:
  pipelines:
    pullRequest:
      pipeline:
        environment:
          - name: WORKSPACE
            value:
          - name: CTEST_TIMEOUT_SECONDS
            value: 480
        agent:
          image: brmclare/oesdk-ubuntu1804-sgx-dev
        stages:
          - name: release
            steps:
              - name: container-build
                command: cmake ${WORKSPACE} && make -j 4 && ctest --output-on-failure --timeout ${CTEST_TIMEOUT_SECONDS}
        timeout:
          time: 15
          unit: minutes